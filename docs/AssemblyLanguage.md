# Assembly Language

## 机器语言

它是机器指令的集合，

机器指令展开来讲就是一台机器可以正确执行的命令

指令：0101001001

## 汇编语言

它的主体是汇编指令，汇编指令和机器指令的差别在于指令的表示方法上，汇编指令是机器指令便于记忆的书写格式。汇编指令是机器指令的助记符

### 案例

机器指令

1000100111011000

操作：寄存器bx的内容送到ax中

汇编指令

mov ax,bx

这样的写法与人类语言接近，便于阅读和记忆

## 寄存器

它是cpu中可以存储数据的器件，一个cpu有多个寄存器。

ax是其中一个寄存器的代号

bx是另一个寄存器的代号

mov是汇编指令

## 汇编语言的组成

由以下3类组成

* 汇编指令（机器码的助记符）
* 伪指令（由编译器执行）
* 其他符号（右边一起识别）

汇编语言的核心是汇编指令，它决定了汇编语言的特性。

## 存储器

cpu是计算机的核心部件，它控制整个计算机的运作并进行运算，要想让一个cpu工作，就必须向它提供指令和数据。

指令和数据在存储器里存放，也就是平时说的内存。

想要CPU开始工作，就必须要提供给它指令和数据。指令是告诉CPI怎么做，数据是告诉CPU做什么。

在一台PC电脑上，内存的作用仅次于CPU。没有内存，CPU就无法工作。磁盘不同于内存，磁盘上的数据或程序，如果不读取到内存中，就无法被CPU使用。

## 指令和数据

指令和数据是应用上的概念，在内存或者磁盘上，指令和数据没有任何区别。都是二进制信息（100100111101000）

一段字符是指令还是数据是需要程序员设定的

## 存储单元

存储器被划分为若干个存储单元，每个存储单元从0开始顺序编号。

例如：一个存储器有128个存储单元，编号从0-127，编号必须从0开始。

对于大容量的存储器一般还用以下单位来计量容量（以下用B来带包Byte)

* 1kb = 1024b
* 1mb = 1024kb
* 1gb = 1024mb
* 1tb = 1024gb

磁盘的容量单位跟内存一样，实际上以上的容量单位是微机中常用的计量单位。

## CPU对存储器的读写

cpu要想进行数据的读写，必须和外部器件（标准的说法是芯片）进行三类信息的交互

* 存储单元的地址（地址信息）
* 器件的选择，读或写的指令（控制信息）
* 读或写的数据（数据信息）

那么cpu是通过什么将地址、数据和控制传到存储芯片中的呢？

计算机能处理、传输的信息都是电信号，电信号使用导线传送的。

在计算机中专门有连接CPU和其他芯片的导线，通过成为总线。物理上，一根根导线的集合。逻辑上，地址总线、数据总线、控制总线。

![image-20231127174639267](C:\Users\huawei\AppData\Roaming\Typora\typora-user-images\image-20231127174639267.png)

### CPU向内存读取数据过程

1. CPU将地址信息从地址线传输到内存
2. CPU将控制信息从控制线传输到内存
3. 内存将对应地址的数据从数据线传输到CPU

### CPU向内存写入数据过程

1. CPU将地址信息从地址线传输到内存
2. CPU将控制信息从控制线传输到内存
3. CPU将数据信息从数据线传输到内存

> 从上面我们知道CPU如何进行数据的读写工作原理，我们如何命令计算机进行数据的读写工作呢？

## 地址总线

CPU是通过地址总线来指定存储单元的。

地址总线上能传送多少个不同的信息，cpu就可以对多烧个存储单元进行寻址。

如何达到64位的速度，必须保证CPU、操作系统、应用软件都是64位的，地址总线才能是64位的。

### 地址总线如何发送信息

![image-20231128091010604](C:\Users\huawei\AppData\Roaming\Typora\typora-user-images\image-20231128091010604.png)

程序员从高到低度，就是1011这个地址，它告诉内存是1011地址。

一个cpu有N根地址总线，则可以说这个cpu的地址总线的宽度为N。这样的CPU最多可以寻找2的N次方个内存单元。

## 数据总线

CPU与内存或其他器件之间的数据传送是通过数据总线来进行的。

数据总线的宽度决定了CPU与外界的数据传输速度。

这跟高速公路的逻辑非常的相似

### 传输数据89D8H在数据总线上如何传输的，要传输几次才能完成。

第一次把D8传输过去，它的是11011000

第二次把89传输过去，它的是10001001

8088CPU数据总线上的数据传送情况

8088CPU的数据宽度是8位的，也就是高速公路的8股通道， 所以传输过去需要两次。

8086CPU数据总线上的数据传送情况

8086CPU数据宽度是16位的，也就是高速公路的16股通道， 所以传输过去只要一次。

![image-20231128090950262](C:\Users\huawei\AppData\Roaming\Typora\typora-user-images\image-20231128090950262.png)

## 控制总线

CPU对外部器件的控制是通过控制总线来进行的，在这里控制总线是一个总称，控制总线是一些不同控制线的集合。

由多少根控制总线，就意味着CPU提供对外部器件的多少种控制。所以控制总线的宽度决定了CPU对外部器件的控制能力。

控制总线不是控制的是输入和输出也就是读写。0 1 都有他们的意义，就是表达的意思。0可以是读 也可以是写。1可以是读 也可以是写

每个通道可以认为对应的目标器件，控制总线是对目标器件的控制。

![image-20231128090927406](C:\Users\huawei\AppData\Roaming\Typora\typora-user-images\image-20231128090927406.png)

内存读或写命令由一根名为读信号输出控制线，负责由CPU向外传送读信号，CPU向该控制线上输出低电平表示将要读取数据；一根名为写信号输出控制线负责由CPU向外传送写信号。

我们可以认为读为0，写为1，在电路系统中读就是低电平，写就是高电平。



## 小结

1. 汇编指令是机器指令的助记符，同机器指令一一对应。

2. 每一种CPU都有自己的汇编指令集。

3. CPU可以直接使用的信息在存储器中存放。

4. 在存储器中指令和数据没有任何区别，都是二进制信息。

5. 存储单元从零开始顺序编号

6. 一个存储单元可以存储8个bit(用作单位写成b)即8位二进制数。

   1B=8b

   1KB=1024B

   1MB=1024KB

   1GB=1024MB

   1TB=1024GB

程序员开发的一系列软件，打包成exe后。都可以通过反编译软件将他们的软件反编译为汇编。因为机器码跟汇编是一一对应的，所以只要能看懂汇编就代表着你掌握了他们的开发逻辑。

一样的二进制信息，在存储器存着，在数据总线它表示数据信息，在控制总线它表示控制信息，在地址总线它表示地址信息。同一个二进制，不同场合表示不同意思。

每个CPU芯片都有许多管脚，这些管脚与总线相连。也就是说：这些管脚引出总线，一个CPU可以引出3种总线的宽度标志了这个cpu的不同方面的性能

* 地址总线的宽度决定了CPU的寻址能力
* 数据总线的宽度决定了CPU与其他器件进行数据传送的一次数据传送量
* 控制总线宽度决定CPU对系统中其他器件的控制能力

## 内存地址空间

### 概述

  一个CPU的地址线宽度为10，那么可以寻址1024个内存单元，这1024个可寻到的内存单元就构成了这个CPU的内存地址空间。

### 主板

在每台PC机中，都有一个主板，主板上有核心器件和主要器件。这些器件通过总线（地址总线、数据总线、控制总线）相连。

### 接口卡

计算机系统中，所有可用程序控制其工作的设备，必须受到CPU的控制。CPU对外部设备不能直接控制，如显示器、音响、打印机等等。直接控制这些设备进行工作时插在扩展插槽上的接口卡。

CPU控制网卡，网卡控制网线，网线连接网卡，网卡连接CPU。

CPU控制显卡，显卡控制显示线，显示线连接屏幕。屏幕展示,人的眼睛接收信息。人的眼睛连接大脑。大脑是人的CPU。

CPU是大脑，存储器是心脏。

### 各类存储卡芯片

* 从读写属性上看分为两类
  * 随机存储器(RAM)和只读存储器(ROM)
  * 从功能和连接上分类
    * 随机存储器RAM
    * 装有BIOS的ROM
    * 接口卡上的RAM

#### 随机存储器（RAM)

特点：断电，数据消失。

#### 只读存储器（ROM）

特点：断电，数据不消失，想要数据消失，只能刷掉。

#### 装有BIOS的ROM

BIOS：Basic Input/Output System 基本输入输出系统。

BIOS是由主板和各类接口卡（如：显卡、网卡等）厂商提供的软件系统，可以通过它利用该硬件设备进行最基本的输入输出。在主板和某些接口卡上插有存储相应BIOS的ROM。

**如果病毒可以刷到BIOS中，杀毒软件是无法控制这个病毒的**，杀毒软件是在DOS加载的时候才开始工作的。这就说明病毒出生的比杀毒软件早，它可以控制杀毒软件，但是杀毒软件感知不到病毒的存在。、

所以说装有BIOS必然是只读存储器，它是各个接口卡与主板交互的管理者，在厂商生产时，已经将BIOS刷到只读存储器中。黑客很难攻击只读存储器，

**PC机中各类存储器的逻辑连接**

![image-20231128102040380](C:\Users\huawei\AppData\Roaming\Typora\typora-user-images\image-20231128102040380.png)

上述的那些存储器在物理上是独立的器件，他们在以下两点相同

* 都和CPU的总线相连
* CPU对他们进行读或写的时候都通过控制线发出内存读写命令。

* 将各类存储器看做一个逻辑存储器
  * 所有的物理存储器被看做一个由若干存储单元组成的逻辑存储器
  * 每个物理存储器在这个逻辑存储器哦中占有一个地址段，即一段地址空间。
  * CPU在这段地址空间中读写数据，实际上就是在相对应的物理存储器中读写数据。

![image-20231128102855525](C:\Users\huawei\AppData\Roaming\Typora\typora-user-images\image-20231128102855525.png)

CPU只能感知到逻辑存储器中的地址空间，它不知道也不关心真实的物理存储器。

### 假设：上图中的内存空间地址分配如下：

* 地址0~7FFFH的32KB空间为主随机存储器的地址空间
* 地址8000H~9FFFH的8KB空间为显存地址空间
* 地址A000H~FFFFH的24KB空间为各个ROM的地址空间

不同的计算机系统的内存地址空间分配的情况是不同的

## 8086PC机的内存地址空间分配

